<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TEST 4 DCM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* Reset and base styles */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      background: linear-gradient(135deg, #e0e7ff 0%, #f5f5f5 100%);
      min-height: 100vh;
    }
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      color: #22223b;
      padding: 0;
      margin: 0;
      letter-spacing: 0.01em;
      font-size: 1.08rem;
      background-attachment: fixed;
    }
    .container {
      max-width: 980px;
      margin: 40px auto 40px auto;
      background: rgba(255,255,255,0.98);
      padding: 32px 28px 32px 28px;
      border-radius: 18px;
      box-shadow: 0 8px 32px rgba(30,41,59,0.13), 0 1.5px 6px rgba(30,41,59,0.06);
      border: 1.5px solid #e0e7ff;
      position: relative;
      min-height: 80vh;
    }
    .timer {
  position: sticky;
  top: 0;
  z-index: 1000;

  background: linear-gradient(90deg, #f59e0b 60%, #fbbf24 100%);
  color: #22223b;
  font-weight: bold;
  text-align: center;
  padding: 14px 0;
  border-radius: 0 0 10px 10px; /* colțuri doar jos, ca să arate mai natural */
  margin-bottom: 28px;
  font-size: 1.25rem;
  letter-spacing: 0.04em;
  box-shadow: 0 2px 8px rgba(245,158,11,0.08);
  border: 1.5px solid #fbbf24;
  text-shadow: 0 1px 0 #fff8;
}

    .question {
      border: 1.5px solid #c7d2fe;
      border-radius: 14px;
      padding: 22px 20px 18px 20px;
      margin-bottom: 28px;
      background: linear-gradient(120deg, #f3f4f6 80%, #e0e7ff 100%);
      box-shadow: 0 2px 8px rgba(59,130,246,0.06);
      transition: background-color .3s, box-shadow .3s;
      position: relative;
      overflow: hidden;
    }
    .question:hover {
      background: linear-gradient(120deg, #e0e7ff 80%, #f3f4f6 100%);
      box-shadow: 0 4px 16px rgba(59,130,246,0.10);
      border-color: #6366f1;
    }
    .correct-bg {
      background: linear-gradient(90deg, #e6ffed 80%, #bbf7d0 100%) !important;
      border-color: #22c55e !important;
      box-shadow: 0 2px 12px rgba(34,197,94,0.09);
      animation: correctPulse 0.7s;
    }
    .incorrect-bg {
      background: linear-gradient(90deg, #ffe6e6 80%, #fecaca 100%) !important;
      border-color: #ef4444 !important;
      box-shadow: 0 2px 12px rgba(239,68,68,0.09);
      animation: incorrectPulse 0.7s;
    }
    @keyframes correctPulse {
      0% { box-shadow: 0 0 0 0 #22c55e44; }
      70% { box-shadow: 0 0 0 10px #22c55e22; }
      100% { box-shadow: 0 2px 12px rgba(34,197,94,0.09);}
    }
    @keyframes incorrectPulse {
      0% { box-shadow: 0 0 0 0 #ef444444; }
      70% { box-shadow: 0 0 0 10px #ef444422; }
      100% { box-shadow: 0 2px 12px rgba(239,68,68,0.09);}
    }
    .header {
      font-weight: 700;
      margin-bottom: 10px;
      font-size: 1.18rem;
      color: #3730a3;
      letter-spacing: 0.02em;
      text-shadow: 0 1px 0 #fff8;
    }
    .subtext {
      margin: 0 0 14px 0;
      color: #374151;
      font-size: 1.01rem;
      font-style: italic;
      opacity: 0.92;
    }
    .options {
      margin-left: 24px;
      margin-top: 6px;
      margin-bottom: 8px;
    }
    .options label {
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      cursor: pointer;
      font-size: 1.04rem;
      padding: 4px 0 4px 0;
      transition: background 0.2s;
      border-radius: 6px;
      gap: 8px;
    }
    .options label:hover {
      background: #e0e7ff;
    }
    .options input[type="radio"],
    .options input[type="checkbox"] {
      accent-color: #6366f1;
      width: 18px;
      height: 18px;
      margin-right: 8px;
      transition: accent-color 0.2s;
    }
    .statement {
      margin: 16px 0 8px 0;
      font-weight: 600;
      color: #1e293b;
      font-size: 1.07rem;
      letter-spacing: 0.01em;
    }
    .pool {
      background: linear-gradient(90deg, #eef 80%, #dbeafe 100%);
      padding: 10px 8px 10px 8px;
      border: 1.5px solid #818cf8;
      border-radius: 8px;
      margin-bottom: 16px;
      min-height: 48px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      box-shadow: 0 1px 4px #818cf822;
    }
    .draggable-item {
      display: inline-block;
      background: linear-gradient(90deg, #2563eb 80%, #60a5fa 100%);
      color: #fff;
      padding: 6px 14px;
      margin: 4px 6px 4px 0;
      border-radius: 8px;
      cursor: grab;
      font-weight: 500;
      font-size: 1.01rem;
      box-shadow: 0 2px 8px #2563eb22;
      border: 1.5px solid #1e40af;
      transition: background 0.2s, box-shadow 0.2s;
      user-select: none;
    }
    .draggable-item:active {
      background: #1e40af;
      box-shadow: 0 2px 12px #1e40af33;
    }
    .drop-zone {
      min-height: 48px;
      padding: 12px 10px;
      margin: 10px 0 10px 0;
      border: 2.5px dashed #cbd5e1;
      border-radius: 8px;
      background: #f1f5f9;
      font-size: 1.04rem;
      color: #334155;
      transition: background 0.2s, border-color 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .drop-zone.dragover {
      background: #e0e7ff;
      border-color: #6366f1;
      box-shadow: 0 2px 8px #6366f122;
    }
    select {
      margin-left: 10px;
      padding: 6px 16px 6px 8px;
      border-radius: 8px;
      border: 1.5px solid #cbd5e1;
      font-size: 1.04rem;
      background: #f3f4f6;
      color: #22223b;
      transition: border-color 0.2s, box-shadow 0.2s;
      outline: none;
      min-width: 90px;
      box-shadow: 0 1px 4px #818cf822;
    }
    select:focus {
      border-color: #6366f1;
      box-shadow: 0 2px 8px #6366f122;
      background: #e0e7ff;
    }
    #submitBtn {
      display: block;
      margin: 32px auto 0 auto;
      padding: 16px 36px;
      font-size: 1.13rem;
      color: #fff;
      background: linear-gradient(90deg, #2563eb 80%, #6366f1 100%);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 700;
      letter-spacing: 0.04em;
      box-shadow: 0 2px 12px #2563eb22;
      transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
      outline: none;
    }
    #submitBtn:hover, #submitBtn:focus {
      background: linear-gradient(90deg, #6366f1 80%, #2563eb 100%);
      box-shadow: 0 4px 18px #6366f122;
      transform: translateY(-2px) scale(1.03);
    }
    #resultContainer {
      text-align: center;
      margin-top: 32px;
      padding: 18px 0 0 0;
      font-size: 1.15rem;
      color: #1e293b;
      background: linear-gradient(90deg, #e0e7ff 80%, #f3f4f6 100%);
      border-radius: 10px;
      box-shadow: 0 2px 8px #818cf822;
      min-height: 60px;
    }
    #resultContainer h3 {
      color: #2563eb;
      font-size: 1.35rem;
      margin-bottom: 8px;
      letter-spacing: 0.03em;
      font-weight: 800;
      text-shadow: 0 1px 0 #fff8;
    }
    pre {
      text-align: left;
      background: #f3f4f6;
      padding: 14px 18px;
      border-radius: 8px;
      display: inline-block;
      overflow-x: auto;
      font-size: 0.97rem;
      color: #334155;
      margin-top: 10px;
      box-shadow: 0 1px 4px #818cf822;
      border: 1.5px solid #e0e7ff;
    }
    .correct-code {
      font-size: 0.98rem;
      font-style: italic;
      margin-top: 10px;
      color: #64748b;
      background: #f1f5f9;
      border-radius: 6px;
      padding: 6px 10px;
      display: inline-block;
      box-shadow: 0 1px 4px #818cf822;
      border: 1px solid #e0e7ff;
    }
    /* Responsive styles */
    @media (max-width: 700px) {
      .container {
        padding: 10px 2vw 10px 2vw;
        border-radius: 8px;
      }
      .question {
        padding: 12px 6px 10px 6px;
        border-radius: 8px;
      }
      .header {
        font-size: 1.05rem;
      }
      #submitBtn {
        padding: 12px 18px;
        font-size: 1rem;
        border-radius: 8px;
      }
      .pool, .drop-zone {
        font-size: 0.98rem;
        min-height: 36px;
        border-radius: 6px;
      }
      select {
        font-size: 0.98rem;
        border-radius: 6px;
      }
    }
    /* Custom scrollbar for pool and pre */
    .pool, pre {
      scrollbar-width: thin;
      scrollbar-color: #6366f1 #e0e7ff;
    }
    .pool::-webkit-scrollbar, pre::-webkit-scrollbar {
      height: 8px;
      background: #e0e7ff;
      border-radius: 8px;
    }
    .pool::-webkit-scrollbar-thumb, pre::-webkit-scrollbar-thumb {
      background: #6366f1;
      border-radius: 8px;
    }
    /* Subtle fade-in animation for questions */
    .question {
      opacity: 0;
      animation: fadeInQ 0.7s forwards;
    }
    .question:nth-child(1) { animation-delay: 0.05s; }
    .question:nth-child(2) { animation-delay: 0.10s; }
    .question:nth-child(3) { animation-delay: 0.15s; }
    .question:nth-child(4) { animation-delay: 0.20s; }
    .question:nth-child(5) { animation-delay: 0.25s; }
    .question:nth-child(6) { animation-delay: 0.30s; }
    .question:nth-child(7) { animation-delay: 0.35s; }
    .question:nth-child(8) { animation-delay: 0.40s; }
    .question:nth-child(9) { animation-delay: 0.45s; }
    .question:nth-child(10) { animation-delay: 0.50s; }
    @keyframes fadeInQ {
      to { opacity: 1; }
    }
    /* Miscellaneous */
    ::selection {
      background: #6366f1;
      color: #fff;
    }
    input:focus, button:focus {
      outline: 2px solid #6366f1;
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="timer" id="timer">Submitting in 50:00</div>
    <form id="testForm" onsubmit="return false">
      <div id="questionsContainer"></div>
      <button type="button" id="submitBtn">Submit</button>
    </form>
    <div id="resultContainer"></div>
  </div>

  <script>
    // Block access if not logged in
  if(sessionStorage.getItem('loggedIn') !== 'true'){
    alert('Please login first!');
    window.location.href = 'index.html'; // redirect to login page
  }
    // === YOUR ANSWER KEY (source of truth) ===
    const answerKey = [
      
     [3,1],[0,1,0],[1],[2],[2],[2,3,5,1,0,6],[6,1,3],[0],[3],
     [2],[0],[1,0,1,1],[2,0,3,1],[0],[2],[0,0],[0],[5,3,2,0],[0],
     [0],[0,1,1],[1],[1],[1,0,1],[0],[1,0],[2],[2],[2],
     [0],[1,3],[1],[3],[2,1,5],[3,4],[2],[1],[1],[0,3],
     [1,0,3,2],[2],[3],[0]

  ];

  // === DATASETS (from your original) ===
  const type1Data = {
    3: { 
    prompt:[
    "Evaluate the following SQL code:",
    "What would cause this statement to have a runtime error?",
    "SELECT LastName, FirstName, COUNT(OrderID)",
    "FROM Customers",
    "GROUP BY LastName",
    "HAVING COUNT(OrderID) >= 5"
    ], 
    options:[
    "A schema is missing.",
    "The GROUP BY clause is incomplete.",
    "A WHERE clause is required due to the presence of the HAVING clause.",
    "Semicolons are needed."
    ], 
    correct:[1], 
    multi:true 
    },
4: { 
    prompt:[
    "Evaluate the following SQL statement:",
    "UPDATE Customers SET", "Status = 'Gold'", "IF TotalAmount > 10000"
    ], 
    options:[
    "The object type needs to be specified within the UPDATE statement",
    "The IF clause needs to be at the beginning of the statement",
    "The IF clause needs to be a WHERE clause",
    "The statement needs semicolons"
    ], 
    correct:[2], 
    multi:true 
    }, 

5: { 
    prompt:[
    "Which statement will insert multiple rows?"
    ], 
    options:[
    "INSERT INTO table_name VALUES (value1, value2, value3,...)",
    "INSERT INTO table_name SELECT (column1, column2, column3)",
    "INSERT INTO table_name(column1,column2) VALUES (value1a,value1b), (value2a, value2b)",
    "INSERT INTO table_name (column1, column2, column3,...) VALUES (value1, value2, value3,...)"
    ], 
    correct:[2], 
    multi:true 
    }, 

8: { 
    prompt:[
    "A database designer wants to ensure that locations in a sales territory table exist in a related locations table.",
    "Alter TABLE salesterritory",
    "ADD CONSTRAINT fk_location",
    "FOREIGN KEY (location_id) REFERENCES locations(id)",
    "What is being enforced using this SQL statement?"
    ], 
    options:[
    "Referential integrity",
    "Primary key",
    "Foreign key",
    "Compound key"
    ], 
    correct:[0], 
    multi:true 
    }, 

9: { 
    prompt:[
    "A database of students contains more than one record containing the lastname 'Smith' and firstname 'David'.",
    "If these records are not duplicates, how are they differentiated within the database?"
    ], 
    options:[
    "Schema",
    "Foreign key",
    "Referential integrity",
    "Primary key"
    ], 
    correct:[3], 
    multi:true 
    }, 

10: { 
    prompt:[
    "What will be the result of the following statement?",
    "CREATE VIEW cambridge_data AS"," SELECT NoControl, FullName", "FROM cambridge ","ORDER BY FullName"
    ], 
    options:[
    "A SQL Server Database Error because the same column cannot be used multiple times in the statement.",
    "The creation of a view called cambridge_data with the data ordered by the field FullName.",
    "A SQL Server Database Error because the ORDER BY clause is not valid in the creation of a view.",
    "A SQL Server Database Error because the create view statement is not within a BEGIN/END block."
    ], 
    correct:[2], 
    multi:true 
    }, 

11: { 
    prompt:[
    "A developer looking to create an inventory sheet wants every inventory item listed with every location.",
    "Which query will produce the desired results?"
    ], 
    options:[
    "SELECT product from products CROSS JOIN location from locations",
    "SELECT product from products LEFT OUTER JOIN location from locations ON products.product = locations.location",
    "SELECT product from products FULL OUTER JOIN location from locations ON products.product = locations.location",
    "SELECT product from products INNER JOIN location from locations ON products.product = locations.location"
    ], 
    correct:[0], 
    multi:true 
    }, 

14: { 
    prompt:[
    "A school database needs a table that holds the student who signed up for a class, the class the student signed up for, and the signup date.",
    "The studentID and classID fields are to be used as a composite key for the table. Which statement accurately creates the table and fulfills the requirements for making each record unique?"
    ], 
    options:[
    "CREATE TABLE Signups (  studentID varchar(5) UNIQUE NOT NULL, classID varchar(5) UNIQUE NOT NULL, signupdate DATETIME, primary key (studentID, classID) )",
    "CREATE TABLE Signups ( studentID varchar(5) UNIQUE NOT NULL, classID varchar(5) UNIQUE NOT NULL, signupdate DATETIME, composite key (studentID, classID) )",
    "CREATE TABLE Signups ( studentID varchar(5) UNIQUE NOT NULL, classID varchar(5) UNIQUE NOT NULL, signupdate DATETIME, primary key studentID, primary key classID )",
    "CREATE TABLE Signups ( studentID varchar(5) UNIQUE NOT NULL, classID varchar(5) UNIQUE NOT NULL, signupdate DATETIME, primary keys (studentID, classID) )"
    ], 
    correct:[0], 
    multi:true 
    }, 

15: { 
    prompt:[
    "A sales manager wants to see all customers with sales of at least 50000 who either reside in Los Angeles, California, or in the states of Nevada or Arizona.",
    "Which SQL statement will satisfy the request?"
    ], 
    options:[
    "SELECT lastname, firstname  FROM customers WHERE sales >=50000 OR((city='Los Angeles' AND state='California') OR state IN ('Nevada','Arizona'))",
    "SELECT lastname, firstname FROM customers WHERE sales >50000 AND ((city='Los Angeles' AND state='California') OR state IN ('Nevada','Arizona'))",
    "SELECT lastname, firstname FROM customers WHERE sales >=50000 AND((city='Los Angeles' AND state='California') OR state IN ('Nevada','Arizona'))",
    "SELECT lastname, firstname FROM customers WHERE sales >50000 OR((city='Los Angeles' AND state='California') AND state IN ('Nevada','Arizona'))"
    ], 
    correct:[2], 
    multi:true 
    }, 

17: { 
    prompt:[
    "A sales analyst needs to see who placed orders, the order ID of the order, its subtotal, and a sales tax, which is 5% of the subtotal.",
    "Which SQL statement satisfies all the requirements for the sales analyst?"
    ], 
    options:[
    "SELECT firstname, lastname, subtotal, subtotal * .05 as sales_tax FROM customers INNER JOIN orders on customers.customerid = orders.customerid",
    "SELECT firstname, lastname, subtotal, subtotal * .05 as sales_tax FROM customers LEFT OUTER JOIN orders on customers.customerid = orders.customerid",
    "SELECT firstname, lastname, subtotal, subtotal * 1.05 as sales_tax FROM customers INNER JOIN orders on customers.customerid = orders.customerid",
    "SELECT firstname, lastname, subtotal, subtotal * .05 as sales_tax FROM customers LEFT OUTER JOIN orders on customers.customerid = orders.customerid"
    ], 
    correct:[0], 
    multi:true 
    }, 

19: { 
    prompt:[
    "Which is a major difference between a stored procedure and a function?"
    ], 
    options:[
    "A Function must be compiled every time it is called.",
    "A Stored Procedure must be compiled every time it is called.",
    "Functions cannot be called from a Stored Procedure, but a Stored Procedure can be called from a Function.",
    "A Function can have both input/output parameters, but a Stored Procedure can only have input parameters."
    ], 
    correct:[0], 
    multi:true 
    }, 

20: { 
    prompt:[
    "Evaluate the following table of data:",
    "ID / LastName / Salary",
    "1 | Gomez | 83000 ",
    "2 | Parker | 38000 ",
    "3 | Smith | 70000 ",
    "4 | Tang | 68000 ",
    "What is the result of the following query: SELECT MAX(Salary) from employee."
    ], 
    options:[
    "83000",
    "1",
    "Gomez",
    "38000"
    ], 
    correct:[0], 
    multi:true 
    }, 

22: { 
    prompt:[
    "A view named potential_customers is no longer needed in a database named WaterWorks.",
    "Which SQL statement will remove the view from the database without removing any of the underlying data the view shows?"
    ], 
    options:[
    "DELETE potential_customers",
    "DROP VIEW potential_customers",
    "DELETE VIEW potential_customers",
    "DROP potential_customers"
    ], 
    correct:[1], 
    multi:true 
    }, 

23: { 
    prompt:[
    "A database builder wants to allow only two values in an Active field in a Customers table, with the possible values set to 0 or 1 to represent inactive or active.",
    "Which statement, as part of a CREATE TABLE statement, should be used to set the data type to only allow these two values for the field?"
    ], 
    options:[
    "Active INT",
    "Active BIT",
    "Active CHECK",
    "Active VARCHAR(1)"
    ], 
    correct:[1], 
    multi:true 
    }, 

25: { 
    prompt:[
    "The alpha team no longer needs permissions to update the employees table in a database.",
    "Which SQL statement will remove those permissions?"
    ], 
    options:[
    "REVOKE UPDATE ON OBJECT :: employees FROM alpha",
    "DELETE UPDATE ON OBJECT :: employees FROM alpha",
    "REVOKE UPDATE FROM USER:: alpha ON employees",
    "DELETE UPDATE FROM USER :: alpha ON employees"
    ], 
    correct:[0], 
    multi:true 
    }, 

27: { 
    prompt:[
    "A junior administrator discovers the roles area on a SQL server and wants to know what the roles represent.",
    "What is the main purpose of roles in a database?"
    ], 
    options:[
    "Roles are states of a database.",
    "Roles are objects within a database.",
    "Roles contain sets of permissions that can be granted to users and groups in a database.",
    "Roles are keywords, such as GRANT or REVOKE."
    ], 
    correct:[2], 
    multi:true 
    }, 

28: { 
    prompt:[
    "An IT manager needs to know which day within a log of days for a month had the lowest number of calls.",
    "Which SQL statement fulfills the IT manager's need?"
    ], 
    options:[
    "SELECT log_date, MAX(calls) FROM call_log",
    "SELECT log_date, MIN(calls) FROM call_log GROUP BY MIN(calls)",
    "SELECT log_date, MIN(calls) FROM call_log GROUP BY log_date",
    "SELECT log_date, MIN(calls) FROM call_log"
    ], 
    correct:[2], 
    multi:true 
    }, 

29: { 
    prompt:[
    "An orders table is used as a lookup to an orderdetails table with the orderID column from an orders table as the column used to establish the relationship between the two tables.",
    "Which type of deletion will cause a cascading delete between the two tables?"
    ], 
    options:[
    "Deleting all the details for an order deletes the order.",
    "Deleting an order detail for an order deletes all order details for that order.",
    "Deleting an order deletes all the details of the order.",
    "Deleting an order deletes the first detail of that order."
    ], 
    correct:[2], 
    multi:true 
    }, 

30: { 
    prompt:[
    "Analyze the following statement: SELECT COUNT(*) from employees",
    "What will display for results from that statement?"
    ], 
    options:[
    "The number of records in the employees table.",
    "All the records of the table employees.",
    "The number of columns in the employees table.",
    "All the records that contains the character *."
    ], 
    correct:[0], 
    multi:true 
    }, 

31: { 
    prompt:[
    "Which are the reasons for normalizing data within a database? (Choose two)"
    ], 
    options:[
    "Reduce the number of tables in a database.",
    "Reduces dependencies on data.",
    "Reduces the size of a database.",
    "Reduces redundancies of data."
    ], 
    correct:[1,3], 
    multi:true 
    }, 

32: { 
    prompt:[
    "Evaluate the following query:",  "SELECT LastName, FirstName", "FROM Employees", "WHERE EmployeeID = ALL (SELECT EmployeeID from Sales WHERE Amount > 50000);",
    "There are five employees who sold over 50000, but none are showing in the results. What keyword needs to change to allow for the five employees to be returned?"
    ], 
    options:[
    "Change ALL to IN",
    "Change ALL to ANY",
    "Change ALL to WHERE",
    "Change ALL to JOIN"
    ], 
    correct:[1], 
    multi:true 
    }, 

33: { 
    prompt:[
    "A sales manager needs to see orders that have been completed and are the order type is not a pre-order.",
    "Specifically, the orderID, orderdate, and customerID are needed. Which SQL statement fulfills that need?"
    ], 
    options:[
    "SELECT orderid, ordertype, orderdate, customerid FROM orders WHERE orderdate IS NOT NULL OR NOT ordertype = 'pre-order'",
    "SELECT orderid, ordertype, orderdate, customerid FROM orders WHERE orderdate IS EMPTY AND NOT ordertype = 'pre-order'",
    "SELECT orderid, ordertype, orderdate, customerid FROM orders WHERE orderdate <> NULL AND NOT ordertype = 'pre-order'",
    "SELECT orderid, ordertype, orderdate, customerid FROM orders WHERE orderdate IS NOT NULL AND NOT ordertype = 'pre-order'"
    ], 
    correct:[3], 
    multi:true 
    }, 

36: { 
    prompt:[
    "A flower shop wants to see every flower ordered, but each flower should only show once.",
    "Which SQL statement will fulfill that need?"
    ], 
    options:[
    "SELECT UNIQUE flowername FROM flowers",
    "SELECT flowername FROM flowers DISTINCT",
    "SELECT DISTINCT flowername FROM flowers",
    "SELECT TOP 1 flowername FROM flowers"
    ], 
    correct:[2], 
    multi:true 
    }, 

37: { 
    prompt:[
    "A view named vw_customers exists with a firstname and lastname column from the customers table. The customerid field needs to be added to the view and should be the first field in the view.",
    "Which SQL statement makes the needed change to the view?"
    ], 
    options:[
    "DROP VIEW vw_customers CREATE VIEW vw_customers AS SELECT customerid, firstname, lastname FROM customers",
    "ALTER VIEW vw_customers AS SELECT customerid, firstname, lastname FROM customers",
    "The result of the execution of a query.",
    "CREATE VIEW vw_customers AS SELECT customerid, firstname, lastname FROM customers"
    ], 
    correct:[1], 
    multi:true 
    }, 

38: { 
    prompt:[
    "You have been tasked to delete a row from a database table.",
    "You execute the following SQL statement without a WHERE clause: DELETE FROM table_name",
    "What will be the result of executing the statement above without a WHERE clause?"
    ], 
    options:[
    "No records will be deleted.",
    "All records will be deleted.",
    "An error message will be returned.",
    "The first record will be deleted by default."
    ], 
    correct:[1], 
    multi:true 
    }, 

39: { 
    prompt:[
    "Which SQL statements, as part of creating a column in a table, will format the orderdate field in YYYY-MM-DD HH:MI:SS format? (Choose two)"
    ], 
    options:[
    "orderdate DATETIME",
    "orderdate TIMESTAMP",
    "orderdate DATE",
    "orderdate SMALLDATETIME"
    ], 
    correct:[0,3], 
    multi:true 
    }, 

41: { 
    prompt:[
    "Which SQL statement will delete a table named testtable from a database?"
    ], 
    options:[
    "TRUNCATE TABLE testtable",
    "DELETE TABLE testtable",
    "DROP TABLE testtable",
    "REVOKE TABLE testtable"
    ], 
    correct:[2], 
    multi:true 
    }, 

42: { 
    prompt:[
    "An organization storing climate data needs to have its database tables be in third normal form.",
    "Which statement best defines a table in third normal form?"
    ], 
    options:[
    "The table faithfully represents a relation and has no repeating groups.",
    "No non-prime attribute in the table is functionally dependent on a proper subset of a candidate key.",
    "Every non-trivial join dependency in the table is implied by the superkeys of the table.",
    "Every non-prime attribute is non-transitively dependent on every candidate key in the table."
    ], 
    correct:[3], 
    multi:true 
    }, 

43: { 
    prompt:[
    "You are the assistant database manager at a local amusement park. Amusement park ticket prices are being raised this season by 10%, and you have been tasked to update the database Park table.",
    "Which would be the correct statement to raise Ticket prices 10% in the Park table?"
    ], 
    options:[
    "UPDATE Park SET Ticket = Ticket * 1.1",
    "UPDATE Ticket SET Park = Ticket * 1.1",
    "UPDATE Park SET Ticket = .10",
    "UPDATE Park SET Ticket = increase 10%"
    ], 
    correct:[0], 
    multi:true 
    }, 

      };

    const type2Data = {
     2: { 
  prompt:"Evaluate each statement regarding aggregates in queries. Select Yes if the statement is true and No if the statement is false.", 
  statements:[
    "A GROUP BY clause must be paired with a HAVING clause.",
    "A GROUP BY clause must contain all non-aggregated fields in a query.",
    "A GROUP BY clause must be paired with a WHERE clause."
  ], 
  correct:['no','yes','no'] 
},

12: { 
  prompt:"For each of the following statements, select Yes if the statement is true or No if the statement is false.", 
  statements:[
    "The ALTER TABLE command can add a new column.",
    "The ALTER TABLE command can change the IDENTITY specification of an existing column.",
    "The ALTER TABLE command can drop multiple columns from a table.",
    "The ALTER TABLE command can modify the data type of an existing column."
  ], 
  correct:['yes','no','yes','yes'] 
},

21: { 
  prompt:"For each of the following statements regarding primary keys, select Yes if the statement is true and No if the statement is false.", 
  statements:[
    "A 'unique constraint' is the same as a primary key.",
    "An example of a primary key would be a user ID.",
    "Relationships between tables are stored as foreign key constraints."
  ], 
  correct:['no','yes','yes'] 
},

24: { 
  prompt:"For each of the following statements, select Yes if the statement is true and No if it is not.", 
  statements:[
    "Char(size) holds a fixed-length string.",
    "Text holds a fixed-length string.",
    "Varchar(size) can hold a string of differing lengths."
  ], 
  correct:['yes','no','yes'] 
},


    };

    const type3Data = {
      1:  {
        prompt:[
          "Using drag and drop, complete the query below. The goal of the query is to display a list of customers from Utah, sorted by last name. ","SELECT lastname, firstname", " FROM customers"
        ],
          statements:[
          "state= 'UT':",
          "lastname:"
        ],
        items:["SORT BY","ORDER BY","WHEN","WHERE","HAVING"],
        correct:[3,1]
      },
      6: {
        prompt:[
          "A quality control specialist wants to see an orderID after inputting an orderdetailID. Using drag and drop, create the stored procedure necessary to fulfill this request. Not every step will be used."
        ],
        statements:[
          "Step 1:",
          "Step 2:",
          "Step 3:",
          "Step 4:",
          "Step 5:",
          "Step 6:"
        ],
        items:[" Where orderdetailID = @orderdetailID","SELECT @orderID = orderID FROM orderdetails","CREATE PROCEDURE upsGetOrderID", "@orderdetailID int, @orderID int OUTPUT","RETURN @orderID","AS BEGIN","END"],
        correct:[2,3,5,1,0,6]
      },
      7: {
        prompt:[
          "You have created a list of students who are helping at a Science Fair. The list is contained in a database table named Students that has the following columns and rows:", " Id FirstName"," 1 Shannon", "2 Juan", "3 Benjamin", "4 Tiffany","You have learned that Benjamin will not be attending the Science Fair and Kayden will be replacing him. What SQL query will replace Benjamin with Kayden in the table?"
        ],
        statements:[
          "Step 1:",
          "Step 2:",
          "Step 3:"
        ],
        items:["FROM Students","SET FirstName = 'Kayden'","UPDATE FirstName=","WHERE FirstName = 'Benjamin'","SET Students","TO FirstName= ","UPDATE Students"],
        correct:[6,1,3]
      },
      13: {
        prompt:[
          "Match each database component to its function."
        ],
        statements:[
          "A group of database items listed left to right (horizontally) is called ",
          "A group of items listed up and down (vertically) is called ",
          "A location in a record in which a particular type of data is stored is called ",
          "A table of rows and columns used to store and organize data is called "
        ],
        items:[" Column","Entity","Row", "Field"],
        correct:[2,0,3,1]
      },
      18: {
        prompt:[
          "You want to create a phone directory for your organization using a database table. Each record must be uniquely identified with a numeric value. The phone directory will contain the following information for each member: First name, Last name, Date of birth, Phone number, Photo. How should the SQL query be ordered to create the table?"
        ],
        statements:[
          "[Id] ",
          "[LastName]",
          "[DateOfBirth]",
          "[Photo]"
        ],
        items:[" IMAGE","NULL","DATE", "NCHAR(255) NULL","TIMESTAMP","INT NOT NULL PRIMARY KEY","INT NOT NULL FOREIGN KEY"],
        correct:[5,3,2,0]
      },
      34: {
        prompt:[
          "You need to create a query that will display all records from the clients table that have the state New Mexico and the city of Roswell. To answer, drag the appropriate SQL statement from the column on the left to its place in the SQL query on the right."
        ],
        statements:[
          ":",
          ":",
          ":"
        ],
        items:["SELECT FROM CLIENTS","FROM clients","SELECT *", "FROM", "SELECT ALL", "WHERE state = 'New Mexico' or city = 'Roswell'"],
        correct:[2,1,5]
      },
      35: {
        prompt:[
          "You have the following table definition:" ,"CREATE TABLE Cookies ","(CookieID INTEGER,", "Name VARCHAR(20))"
        ],
        Text:[
            "You need to insert a new product. The cookie name is Snickerdoodle and the cookie ID is 77. To answer, drag the appropriate SQL statement from the column on the left to its place in the SQL query on the right."
        ],
        statements:[
          ":",
          ":"
        ],
        items:["VALUES (CookieID= 77, 'Snickerdoodle') Name","INSERT INTO Cookies","INSERT 77, 'Snickerdoodle'","VALUES ('Snickerdoodle', 77)","INTO Snickerdoodle", "INSERT NEW CookieID = 77, Name = 'Snickerdoodle'","INTO Cookies"],
        correct:[3,4]
      },
      40: {
        prompt:[
          "Match each JOIN type to its function. To answer, drag the JOIN type from the column on the left to its correct function on the right. Each JOIN type may be used once, more than once, or not at all. "
        ],
        statements:[
          "Returns all rows from the left table, even if there are no matches in the right table.",
          "Returns all rows from the right table, even if there are no matches in the left table.",
          "Returns rows when there is a match in one of the tables.",
          "Returns rows when there is at least one match in both tables."
        ],
        items:[" Right Outer Join","Left Outer Join","Inner Join", "Full Outer Join"],
        correct:[1,0,3,2]
      }
    };

    const type4Data = {
      16: {
        intro:"A database administrator needs to give the following permissions on the following objects: Execute permissions on the sp_current_sales stored procedure to the inside_sales group The ability to run the vw_sales_today view to the sales_manager role and and allow the manager to allow others to see the view as well. Using the dropdown lists, choose the correct syntax for each statement.",
        subs:[
          { text:"What statement gives the inside_sales team the ability to execute the sp_current_sales stored procedure?", options:["GRANT EXECUTE ON sp_current_sales TO inside_sales","GRANT EXECUTE ON sp_current_sales TO GROUP inside_sales","GRANT EXECUTE ON sp_current_sales TO inside_sales WITH GRANT OPTION"], correct:"GRANT EXECUTE ON sp_current_sales TO inside_sales" },
          { text:"Which statement allows the sales_manager role to run the vw_sales_today view and allow the manager to give others the same permission?", options:["GRANT SELECT ON vw_sales_today TO sales_manager WITH GRANT OPTION","GRANT SELECT ON vw_sales_today TO ROLE sales_manager WITH GRANT OPTION", "GRANT OPTION SELECT ON vw_sales_today TO sales_manager"], correct:"GRANT SELECT ON vw_sales_today TO sales_manager WITH GRANT OPTION" }
        ]
      },
      26: {
        intro:"Use the dropdown arrows to choose whether each index characteristic is part of a clustered index or a non-clustered index.",
        subs:[
          { text:"This type of index sorts data on the column with a clustered index.", options:["Non-Clustered","Clustered"], correct:"Clustered" },
          { text:"The type of index stored data in a separate structure from the table being indexed.", options:["Non-Clustered","Clustered"], correct:"Non-Clustered" }
        ]
      }
    };

    // === BUILDERS ===
    function buildEmpty(q) {
      const d = document.createElement('div');
      d.className = 'question';
      const p = document.createElement('p');
      p.className = 'header';
      p.textContent = `Q${q}.`;
      d.appendChild(p);
      return d;
    }

    function buildType1(q) {
      const cfg = type1Data[q];
      const d = document.createElement('div');
      d.className = 'question';
      cfg.prompt.forEach((txt,i) => {
        const p = document.createElement('p');
        p.textContent = i===0 ? `Q${q}. ${txt}` : txt;
        p.className = i===0 ? 'header' : 'subtext';
        d.appendChild(p);
      });
      // Render image if present (after prompt)
      if (cfg.Image) {
        const imgWrapper = document.createElement('div');
        imgWrapper.innerHTML = cfg.Image;
        d.appendChild(imgWrapper);
      }
      const opts = document.createElement('div');
      opts.className = 'options';
      cfg.options.forEach((opt,i) => {
        const lbl = document.createElement('label');
        const inp = document.createElement('input');
        inp.type = cfg.multi ? 'checkbox' : 'radio';
        inp.name = `q${q}`;
        inp.value = i;
        lbl.appendChild(inp);
        lbl.appendChild(document.createTextNode(opt));
        opts.appendChild(lbl);
      });
      d.appendChild(opts);
      return d;
    }

    function buildType2(q) {
      const cfg = type2Data[q];
      const d = document.createElement('div');
      d.className = 'question';
      const h = document.createElement('p');
      h.className = 'header';
      h.textContent = `Q${q}. ${cfg.prompt}`;
      d.appendChild(h);
      cfg.statements.forEach((stmt,i) => {
        const block = document.createElement('div');
        const sp = document.createElement('p');
        sp.className = 'statement';
        sp.textContent = `${i+1}. ${stmt}`;
        block.appendChild(sp);
        const opts = document.createElement('div');
        opts.className = 'options';
        // IMPORTANT: 0 = No, 1 = Yes
        ['No','Yes'].forEach((label, idx) => {
          const lbl = document.createElement('label');
          const inp = document.createElement('input');
          inp.type = 'radio';
          inp.name = `q${q}-${i}`;
          inp.value = idx; // 0 for No, 1 for Yes
          lbl.appendChild(inp);
          lbl.appendChild(document.createTextNode(label));
          opts.appendChild(lbl);
        });
        block.appendChild(opts);
        d.appendChild(block);
      });
      return d;
    }

    function buildType3(q) {
      const cfg = type3Data[q];
      const d = document.createElement('div');
      d.className = 'question';
      cfg.prompt.forEach((line,i) => {
        const p = document.createElement('p');
        p.textContent = i===0 ? `Q${q}. ${line}` : line;
        p.className = i===0 ? 'header' : 'subtext';
        d.appendChild(p);
      });
      // Render image if present (after prompt)
      if (cfg.Image) {
        const imgWrapper = document.createElement('div');
        imgWrapper.innerHTML = cfg.Image;
        d.appendChild(imgWrapper);
      }
      const pool = document.createElement('div');
      pool.className = 'pool';
      cfg.items.forEach((it,i) => {
        const itm = document.createElement('div');
        itm.className = 'draggable-item';
        itm.draggable = true;
        itm.id = `q${q}-itm-${i}`;
        itm.textContent = it;
        pool.appendChild(itm);
      });
      d.appendChild(pool);
      cfg.statements.forEach((stmt,i) => {
        const zone = document.createElement('div');
        zone.className = 'drop-zone';
        zone.id = `q${q}-zone-${i}`;
        zone.textContent = stmt;
        d.appendChild(zone);
      });
      pool.querySelectorAll('.draggable-item').forEach(item => {
        item.addEventListener('dragstart', e => {
          e.dataTransfer.setData('text/plain', item.id);
        });
      });
      d.querySelectorAll('.drop-zone, .pool').forEach(z => {
        z.addEventListener('dragover', e => { e.preventDefault(); z.classList.add('dragover'); });
        z.addEventListener('dragleave', () => z.classList.remove('dragover'));
        z.addEventListener('drop', e => {
          e.preventDefault(); z.classList.remove('dragover');
          const id = e.dataTransfer.getData('text/plain');
          const dragged = document.getElementById(id);
          if (dragged) z.appendChild(dragged);
        });
      });
      return d;
    }

    function buildType4(q) {
      const cfg = type4Data[q];
      const d = document.createElement('div');
      d.className = 'question';
      const h = document.createElement('p');
      h.className = 'header';
      h.textContent = `Q${q}. ${cfg.intro}`;
      d.appendChild(h);
      // Render image if present (before subs)
      if (cfg.Image) {
        const imgWrapper = document.createElement('div');
        imgWrapper.innerHTML = cfg.Image;
        d.appendChild(imgWrapper);
      }

      cfg.subs.forEach((sub,i) => {
        const p = document.createElement('p');
        p.className = 'statement';
        p.textContent = `${i+1}. ${sub.text} `;
        const sel = document.createElement('select');
        sel.name = `q${q}-${i}`;
        const empty = document.createElement('option');
        empty.value = '';
        empty.textContent = 'Select';
        sel.appendChild(empty);
        sub.options.forEach((opt,idx) => {
          const o = document.createElement('option');
          o.value = idx; // index mapping for answer codes
          o.textContent = opt.charAt(0).toUpperCase()+opt.slice(1);
          sel.appendChild(o);
        });
        p.appendChild(sel);
        if (sub.suffix) p.appendChild(document.createTextNode(sub.suffix));
        d.appendChild(p);
      });
      return d;
    }

    // === HELPERS ===
    function arraysEqual(a,b){ if(!Array.isArray(a)||!Array.isArray(b))return false; if(a.length!==b.length)return false; for(let i=0;i<a.length;i++) if(a[i]!==b[i]) return false; return true; }

    function getUserAnswer(q) {
      if (type1Data[q]) {
        const inputs = Array.from(document.querySelectorAll(`input[name="q${q}"]:checked`));
        const sel = inputs.map(i => +i.value);
        return sel.sort((x,y)=>x-y); // sort for multi
      } else if (type2Data[q]) {
        const cfg = type2Data[q];
        return cfg.statements.map((_,i) => {
          const r = document.querySelector(`input[name="q${q}-${i}"]:checked`);
          return r ? +r.value : null; // 0=No,1=Yes
        });
      } else if (type3Data[q]) {
        return type3Data[q].statements.map((_,i) => {
          const itm = document.getElementById(`q${q}-zone-${i}`).querySelector('.draggable-item');
          return itm ? +itm.id.split('-').pop() : null;
        });
      } else if (type4Data[q]) {
        return type4Data[q].subs.map((_,i) => {
          const sel = document.querySelector(`select[name="q${q}-${i}"]`);
          return sel ? (sel.value===''?null:+sel.value) : null;
        });
      }
      return [];
    }

    // === RENDER ===
    document.addEventListener('DOMContentLoaded', () => {
      const host = document.getElementById('questionsContainer');
      for (let q = 1; q <= 43; q++) {
        let node;
        if      (type1Data[q]) node = buildType1(q);
        else if (type2Data[q]) node = buildType2(q);
        else if (type3Data[q]) node = buildType3(q);
        else if (type4Data[q]) node = buildType4(q);
        else                   node = buildEmpty(q);
        node.id = `question-${q}`;
        host.appendChild(node);
      }

      // Timer
let sec = 50 * 60;
const tEl = document.getElementById('timer');
const timerInterval = setInterval(() => {
  const m = Math.floor(sec/60), s = String(sec%60).padStart(2,'0');
  tEl.textContent = `Submitting in ${m}:${s}`;
  sec--;

  if (sec < 0) {
    clearInterval(timerInterval);
    // declanșează click pe butonul de submit
    document.getElementById('submitBtn').click();

    // popup + redirect
    setTimeout(() => {
      if (confirm("Timpul a expirat!\nVezi scorul și codul răspunsurilor?\nApasă OK pentru a merge la selectarea altui test sau acelasi")) {
        window.location.href = "select.html";
      }
    }, 300);
  }
}, 1000);
      

      // Submit
      document.getElementById('submitBtn').addEventListener('click', () => {
        let correctCount = 0;
        const userKey = [];

        for (let q = 1; q <= 43; q++) {
          const ans = getUserAnswer(q);
          userKey.push(ans);
          const ok = arraysEqual(ans, answerKey[q-1]);
          const el = document.getElementById(`question-${q}`);
          el.classList.remove('correct-bg','incorrect-bg');
          if (ok) { el.classList.add('correct-bg'); correctCount++; }
          else    { el.classList.add('incorrect-bg'); }

          // show correct code under the question
          let codeEl = el.querySelector('.correct-code');
          if (!codeEl) {
            codeEl = document.createElement('div');
            codeEl.className = 'correct-code';
            el.appendChild(codeEl);
          }
          codeEl.textContent = `Correct code: ${JSON.stringify(answerKey[q-1])}`;
        }

        const points = Math.round((correctCount/43)*1000);
        const result = document.getElementById('resultContainer');
        result.innerHTML = `<h3>You scored ${points} points</h3><p>Your answer code:</p><pre>${JSON.stringify(userKey)}</pre>`;
      });
    });
  </script>
</body>
</html>

